(dp1
S'output'
p2
S"<class 'greenlet.error'> cannot switch to a different thread"
p3
sS'layer'
p4
S'/home/rbarghi/Documents/web2py/applications/callofadventure/controllers/default.py'
p5
sS'code'
p6
S'#-----------------------------#\n#      default_controller     #\n#-----------------------------#\n\n\n#import control\nfrom gluon.custom_import import track_changes\ntrack_changes(True)\n\n#python lib modules\nimport random\nimport datetime\n\n#custom modules\n\n#home page\n@auth.requires_login()\ndef index():\n    if not session.last_shop_time:\n        session.last_shop_time=datetime.datetime.now()\n    #rows = db(db.image).select()\n    #first_row = rows[0]\n    #second_row = rows[1]\n    return dict()\n\ndef download():\n    return response.download(request, db)\n\n#Middle point for shop and quests\n#items with stat total less the this go into shop\n#quest loot is higher than this\nITEM_MID = 20\n#base rate of 25%, +5% per difficulty level\nRARE_ITEM_RATE = 0.25\nRARE_ITEM_RATE_ADD = 0.05\n\n#all hires page\n@auth.requires_login()\ndef hirePage():\n    hireList = db().select(db.auth_user.ALL, orderby=db.auth_user.first_name)\n    disband = FORM(\'\', INPUT(_name=\'disband\', _type=\'submit\',\n                             _value=\'Disband Party\'))\n    if disband.process().accepted: #if disband button is clicked\n        session.party = [] #empty party\n        response.flash = \'Party disbanded\'\n    return dict(hireList=hireList, disband=disband)\n\n#disband current party\n@auth.requires_login()\ndef disband():\n    if session.party:\n        session.party = []\n        session.flash = \'Party disbanded\'\n    redirect(URL(\'index\'))\n    return\n\n#details about a certain person to hire them\n@auth.requires_login()\ndef showHire():\n    hire = db.auth_user(request.args(0, cast=int)) or redirect(URL(\'index\'))\n    cost = hire.cost_to_hire or 0\n    current_gold = db.auth_user(auth.user.id).gold or 0\n    form = FORM(\'\', INPUT(_name=\'hire\', _type=\'submit\', _value=\'Hire\'))\n    if form.process().accepted: #when hire button is clicked...\n        if session.party: #if party already started...\n            if hire.id in session.party: #but already hired, alert user\n                session.flash = \'Already hired \' + hire.first_name\n                redirect(URL(\'hirePage\'))\n            else: #otherwise, add to party\n                session.party.append(hire.id)\n        else: #if party hasn\'t been started, create a new one\n            session.party = [hire.id]\n        if current_gold < cost: #if not enough money...\n            session.party.remove(hire.id) #remove hire\n            session.flash = \'Not enough gold to hire\'\n            redirect(URL(\'hirePage\'))\n        new_gold = current_gold - cost #deduct hiring cost\n        db.auth_user(auth.user.id).update_record(gold=new_gold)\n        new_gold = hire.gold + cost #add payment\n        hire.update_record(gold=new_gold)\n        session.flash = \'Successfully hired adventurer \' + hire.first_name\n        redirect(URL(\'hirePage\'))\n    return dict(hire=hire, cost=cost, form=form)\n\n#shop page\n@auth.requires_login()\ndef shop():\n    update=0\n    if not session.shop_items:\n        session.shop_items=[]\n    if not session.last_shop_time:\n        session.last_shop_time=datetime.datetime.now()\n\n    if session.last_shop_time:\n        time=datetime.datetime.now()\n        delta=time-session.last_shop_time\n        #update every 30 seconds right now\n        if(delta.seconds>30 or delta.days>0):\n            #inject generic items into for_sale table\n            weak_items = db(db.equip_items.id < 15).select(db.equip_items.ALL,\n                                                           orderby=\'<random>\',\n                                                           limitby=(0,3))\n            for item in weak_items:\n                db.for_sale.insert(item=item)\n            #add items to user\'s shop\n            update=1\n            session.last_shop_time=datetime.datetime.now()\n            if len(session.shop_items) > 10: #remove surplus\n                while len(session.shop_items) > 5:\n                    session.shop_items.pop(random.randint(0,len(session.shop_items)-1))\n            items=db().select(db.for_sale.ALL,\n                              orderby=\'<random>\',\n                              limitby=(0,4+random.randint(0,3)))\n            for sale_item in items:\n                if not sale_item.item in session.shop_items:\n                    session.shop_items.append(sale_item.item)\n            response.flash=\'New items!\'\n    return dict(itemList=session.shop_items, update=update)\n\n@auth.requires_login()\ndef discussion():\n    return dict()\n\n@auth.requires_login()\ndef discussion_page():\n    db.posts.category.default=request.args(0)\n    db.posts.author.default=auth.user\n    form = SQLFORM(db.posts)\n    if form.process().accepted:\n       response.flash = \'Comment posted\'\n    elif form.errors:\n       response.flash = \'Form has errors\'\n    #else:\n       #response.flash = \'please fill out the form\'\n\n    posts=db(db.posts.category==request.args(0)).select(db.posts.ALL, orderby=~db.posts.post_date)\n    return dict(posts=posts, form=form)\n\n#preview item to buy page\n@auth.requires_login()\ndef showBuyItem():\n    buyItem = db.equip_items(request.args(0, cast=int)) or redirect(URL(\'index\'))\n    cost = buyItem.cost or 0\n    current_gold = db.auth_user(auth.user.id).gold or 0\n    current_inv = db.auth_user(auth.user.id).inventory\n\n    buyNow = FORM(\'\', INPUT(_name=\'buyNow\', _type=\'submit\', _value=\'Buy\'))\n    goPrevious = FORM(\'\', INPUT(_name=\'goPrevious\', _type=\'submit\', _value=\'Cancel\'))\n    if buyNow.process(formname=\'buy_now\').accepted: #if buy button pressed\n        if current_gold < cost: #insufficient funds\n            session.flash = \'You can\\\'t afford this! Get out!\'\n            redirect(URL(\'shop\'))\n        else: #sufficient funds;\n            new_gold = current_gold - cost #transact\n            db.auth_user(auth.user.id).update_record(gold=new_gold)\n            current_inv.append(int(buyItem.id)) #add bought item to inventory\n            db.auth_user(auth.user.id).update_record(inventory=current_inv)\n            session.flash = (buyItem.name) + " has been purchased!"\n            session.shop_items.remove(buyItem.id)\n            db(db.for_sale.item == buyItem.id).delete()\n            redirect(URL(\'shop\'))\n    if goPrevious.process(formname=\'go_previous\').accepted:\n        redirect(URL(\'shop\'))\n\n    return dict(buyItem=buyItem, cost=cost, buyNow=buyNow, goPrevious=goPrevious)\n\n#profile page\n@auth.requires_login()\ndef profilePage():\n    current_user = db.auth_user(auth.user.id)\n    if request.args(0) == \'view\':\n        current_user = db.auth_user(request.args(1, cast=int)) or redirect(URL(\'index\'))\n    update_cost = FORM(\'Cost to Hire: \',\n                       INPUT(_name=\'amount\', _type=\'number\',\n                             _value=current_user.cost_to_hire,\n                             requires=IS_INT_IN_RANGE(minimum=10,maximum=100000,error_message="Invalid cost")),\n                       INPUT(_type=\'submit\', _value=\'UPDATE COST\'))\n    if update_cost.process().accepted:\n        new_cost = update_cost.vars.amount\n        current_user.update_record(cost_to_hire=new_cost)\n        session.flash = \'Updated cost to hire\'\n        redirect(URL("profilePage"))\n\n    if request.args(0) == \'equip\': #equipping items to current loadout\n        equipped = db.equip_items(request.args(1, cast=int)) or redirect(URL(\'profilePage\'))\n        #if item isn\'t in inventory, redirect\n        if not equipped.id in current_user.inventory:\n            redirect(URL(\'profilePage\'))\n        if not current_user.curr_loadout: #if first loadout, make new loadout\n            new_loadout = db.loadouts.insert()\n            current_user.update_record(curr_loadout=new_loadout)\n        new_equip_list = current_user.curr_loadout.equip_list or [0]*10\n        new_equip_list[equipped.category] = equipped\n        current_user.curr_loadout.update_record(equip_list=new_equip_list)\n        session.flash = \'Equipped \' + equipped.name\n        redirect(URL("profilePage"))\n\n    if request.args(0) == \'unequip\': #unequipping items from current loadout\n        unequipped = db.equip_items(request.args(1, cast=int)) or redirect(URL(\'profilePage\'))\n        new_equip_list = current_user.curr_loadout.equip_list\n        new_equip_list[unequipped.category] = 0\n        current_user.curr_loadout.update_record(equip_list=new_equip_list)\n        session.flash = \'Unequipped \' + unequipped.name\n        redirect(URL("profilePage"))\n\n    if request.args(0) == \'sell\': #selling items from inventory\n        sold = db.equip_items(request.args(1, cast=int)) or redirect(URL(\'profilePage\'))\n        #if item isn\'t in inventory, redirect\n        if not sold.id in current_user.inventory:\n            redirect(URL(\'profilePage\'))\n        #add gold from sale\n        new_gold = current_user.gold + int(sold.cost*.9)\n        current_user.update_record(gold=new_gold)\n        #actually remove item from inventory\n        new_inventory = current_user.inventory\n        new_inventory.pop(new_inventory.index(sold.id))\n        current_user.update_record(inventory=new_inventory)\n        new_rarity = sold.attack + sold.defense + sold.speed\n        #insert into table that stores items to be sold\n        db.for_sale.insert(item=sold.id, rarity=new_rarity)\n        session.flash = \'Sold \' + sold.name\n        redirect(URL("profilePage"))\n\n    return dict(update_cost=update_cost, current_user=current_user)\n\ndef itemInfo():\n    item = db.equip_items(request.args(0))\n    js_string = "jQuery(\'#display_name\').text(%s);" % repr(item.name)\n    show_cost = str(int(item.cost)) + "G"\n    js_string += "jQuery(\'#display_cost\').text(%s);" % repr(\'Cost: \'+show_cost)\n    show_type = db.equip_types(item.category).name\n    js_string += "jQuery(\'#display_type\').text(%s);" % repr(show_type)\n    show_atk = str(item.attack)\n    js_string += "jQuery(\'#display_atk\').text(%s);" % repr(\'Attack: \'+show_atk)\n    show_def = str(item.defense)\n    js_string += "jQuery(\'#display_def\').text(%s);" % repr(\'Defense: \'+show_def)\n    show_spd = str(item.speed)\n    js_string+= "jQuery(\'#display_spd\').text(%s);" % repr(\'Speed: \'+show_spd)\n    js_string+= "jQuery(\'#display_flav\').text(%s);" % repr(item.details)\n    return js_string\n\ndef buyItem():\n    buyItem = db.equip_items(request.args(0, cast=int)) or redirect(URL(\'shop\'))\n    cost = buyItem.cost or 0\n    current_gold = db.auth_user(auth.user.id).gold or 0\n    current_inv = db.auth_user(auth.user.id).inventory\n\n    if current_gold < cost: #insufficient funds\n        session.flash = \'You can\\\'t afford this! Get out!\'\n        redirect(URL(\'shop\'))\n    else: #sufficient funds;\n        new_gold = current_gold - cost #transact\n        db.auth_user(auth.user.id).update_record(gold=new_gold)\n        current_inv.append(int(buyItem.id)) #add bought item to inventory\n        db.auth_user(auth.user.id).update_record(inventory=current_inv)\n        session.flash = (buyItem.name) + " has been purchased!"\n        session.shop_items.remove(buyItem.id)\n        db(db.for_sale.item == buyItem.id).delete()\n        redirect(URL(\'shop\'))\n    return 1\n\ndef getItem():\n    item = db.equip_items(request.args(0))\n    js_string = "jQuery(\'#display_name\').text(%s);" % repr(item.name)\n    show_cost = str(int(item.cost*0.9)) + "G"\n    js_string += "jQuery(\'#display_cost\').text(%s);" % repr(show_cost)\n    show_type = db.equip_types(item.category).name\n    js_string += "jQuery(\'#display_type\').text(%s);" % repr(show_type)\n    show_atk = str(item.attack)\n    js_string += "jQuery(\'#display_atk\').text(%s);" % repr(show_atk)\n    show_def = str(item.defense)\n    js_string += "jQuery(\'#display_def\').text(%s);" % repr(show_def)\n    show_spd = str(item.speed)\n    js_string+= "jQuery(\'#display_spd\').text(%s);" % repr(show_spd)\n    js_string+= "jQuery(\'#display_flav\').text(%s);" % repr(item.details)\n    return js_string\n\ndef user():\n    if request.args(0) == \'profile\':\n        redirect(URL(\'profilePage\'))\n    return dict(form=auth())\n\nimport chats\n\n\n@auth.requires_login()\ndef chat():\n    return chats.index(db)\n\n\n@auth.requires_signature()\ndef message_new():\n    return chats.message_new(db)\n\n\n@auth.requires_signature()\ndef message_updates():\n    # need to unlock the session when using\n    # session file, should not be need it when\n    # using session in db, or in a cookie\n    session._unlock(response)\n    return chats.message_updates(db)\n\n\ndef user():\n    return dict(form=auth())\n\nresponse._vars=response._caller(message_updates)\n'
p7
sS'snapshot'
p8
(dp9
S'exception'
p10
(dp11
S'__module__'
p12
S"'greenlet'"
p13
sS'__getslice__'
p14
S"<method-wrapper '__getslice__' of error object>"
p15
sS'__str__'
p16
S"<method-wrapper '__str__' of error object>"
p17
sS'__reduce__'
p18
S'<built-in method __reduce__ of error object>'
p19
sS'__dict__'
p20
S'{}'
p21
sS'__sizeof__'
p22
S'<built-in method __sizeof__ of error object>'
p23
sS'__weakref__'
p24
S'None'
p25
sS'__init__'
p26
S"<method-wrapper '__init__' of error object>"
p27
sS'__setattr__'
p28
S"<method-wrapper '__setattr__' of error object>"
p29
sS'__reduce_ex__'
p30
S'<built-in method __reduce_ex__ of error object>'
p31
sS'__new__'
p32
S'<built-in method __new__ of type object>'
p33
sS'__format__'
p34
S'<built-in method __format__ of error object>'
p35
sS'__class__'
p36
S"<class 'greenlet.error'>"
p37
sS'__doc__'
p38
S'None'
p39
sS'__getitem__'
p40
S"<method-wrapper '__getitem__' of error object>"
p41
sS'__setstate__'
p42
S'<built-in method __setstate__ of error object>'
p43
sS'__getattribute__'
p44
S"<method-wrapper '__getattribute__' of error object>"
p45
sS'args'
p46
S"('cannot switch to a different thread',)"
p47
sS'__subclasshook__'
p48
S'<built-in method __subclasshook__ of type object>'
p49
sS'__unicode__'
p50
S'<built-in method __unicode__ of error object>'
p51
sS'__delattr__'
p52
S"<method-wrapper '__delattr__' of error object>"
p53
sS'__repr__'
p54
S"<method-wrapper '__repr__' of error object>"
p55
sS'__hash__'
p56
S"<method-wrapper '__hash__' of error object>"
p57
ssS'evalue'
p58
S'cannot switch to a different thread'
p59
sS'request'
p60
cgluon.html
XML_unpickle
p61
(S's\xf4X\x00\x00<div><table><tr><td style="font-weight:bold;vertical-align:top;">ajax</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">application</td><td style="vertical-align:top;">:</td><td><div>callofadventure</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">args</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cid</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">client</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">controller</td><td style="vertical-align:top;">:</td><td><div>default</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cookies</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">session_id_callofadventure</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1-dc8dd33e-50ed-45f2-a837-24301503ade7<table><tr><td style="font-weight:bold;vertical-align:top;">comment</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">domain</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">expires</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">httponly</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">max-age</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">secure</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">version</td><td style="vertical-align:top;">:</td><td><div></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">env</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">CONTENT_LENGTH</td><td style="vertical-align:top;">:</td><td><div>9</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">CONTENT_TYPE</td><td style="vertical-align:top;">:</td><td><div>application/x-www-form-urlencoded; charset=UTF-8</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_ACCEPT</td><td style="vertical-align:top;">:</td><td><div>*/*</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_ACCEPT_ENCODING</td><td style="vertical-align:top;">:</td><td><div>gzip, deflate, br</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_ACCEPT_LANGUAGE</td><td style="vertical-align:top;">:</td><td><div>en-US,en;q=0.8</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_CONNECTION</td><td style="vertical-align:top;">:</td><td><div>keep-alive</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_CONTENT_LENGTH</td><td style="vertical-align:top;">:</td><td><div>9</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_CONTENT_TYPE</td><td style="vertical-align:top;">:</td><td><div>application/x-www-form-urlencoded; charset=UTF-8</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_COOKIE</td><td style="vertical-align:top;">:</td><td><div>session_id_callofadventure=127.0.0.1-dc8dd33e-50ed-45f2-a837-24301503ade7</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_HOST</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1:8000</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_ORIGIN</td><td style="vertical-align:top;">:</td><td><div>http://127.0.0.1:8000</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_REFERER</td><td style="vertical-align:top;">:</td><td><div>http://127.0.0.1:8000/callofadventure/default/chat</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_USER_AGENT</td><td style="vertical-align:top;">:</td><td><div>Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">HTTP_X_REQUESTED_WITH</td><td style="vertical-align:top;">:</td><td><div>XMLHttpRequest</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">PATH_INFO</td><td style="vertical-align:top;">:</td><td><div>/callofadventure/default/message_updates.json</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">QUERY_STRING</td><td style="vertical-align:top;">:</td><td><div>_signature=ab6818f6bb049dda479e2209ec749c4face43c24</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">REMOTE_ADDR</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">REMOTE_PORT</td><td style="vertical-align:top;">:</td><td><div>34024</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">REQUEST_METHOD</td><td style="vertical-align:top;">:</td><td><div>POST</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SCRIPT_NAME</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_NAME</td><td style="vertical-align:top;">:</td><td><div>unknown9c4e36950f94.att.net</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_PORT</td><td style="vertical-align:top;">:</td><td><div>8000</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_PROTOCOL</td><td style="vertical-align:top;">:</td><td><div>HTTP/1.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">SERVER_SOFTWARE</td><td style="vertical-align:top;">:</td><td><div>Rocket 1.2.6</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">app_folders</td><td style="vertical-align:top;">:</td><td><div>set([&#x27;/home/rbarghi/Documents/web2py/applications/admin/&#x27;, &#x27;/home/rbarghi/Documents/web2py/applications/callofadventure/&#x27;, &#x27;/home/rbarghi/Documents/web2py/applications/w2pchat/&#x27;, &#x27;/home/rbarghi/Documents/web2py/applications/welcome/&#x27;])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">applications_parent</td><td style="vertical-align:top;">:</td><td><div>/home/rbarghi/Documents/web2py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cmd_args</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cmd_options</td><td style="vertical-align:top;">:</td><td><div>&lt;Values at 0x7f9ecdeec368: {&#x27;verbose&#x27;: False, &#x27;ip&#x27;: &#x27;127.0.0.1&#x27;, &#x27;debuglevel&#x27;: 30, &#x27;with_scheduler&#x27;: False, &#x27;shutdown_timeout&#x27;: 5, &#x27;taskbar&#x27;: False, &#x27;with_coverage&#x27;: False, &#x27;pid_filename&#x27;: &#x27;httpserver.pid&#x27;, &#x27;maxthreads&#x27;: None, &#x27;softcron&#x27;: False, &#x27;server_name&#x27;: &#x27;unknown9c4e36950f94.att.net&#x27;, &#x27;bpython&#x27;: False, &#x27;nogui&#x27;: False, &#x27;port&#x27;: 8000, &#x27;print_errors&#x27;: False, &#x27;extcron&#x27;: False, &#x27;runcron&#x27;: False, &#x27;run_system_tests&#x27;: False, &#x27;test&#x27;: None, &#x27;folder&#x27;: &#x27;/home/rbarghi/Documents/web2py&#x27;, &#x27;config&#x27;: &#x27;&#x27;, &#x27;minthreads&#x27;: None, &#x27;shell&#x27;: None, &#x27;run&#x27;: &#x27;&#x27;, &#x27;log_filename&#x27;: &#x27;httpserver.log&#x27;, &#x27;profiler_dir&#x27;: None, &#x27;args&#x27;: [&#x27;&#x27;], &#x27;socket_timeout&#x27;: 5, &#x27;ssl_ca_certificate&#x27;: None, &#x27;scheduler&#x27;: None, &#x27;interfaces&#x27;: None, &#x27;ssl_private_key&#x27;: &#x27;&#x27;, &#x27;gae&#x27;: None, &#x27;password&#x27;: &#x27;******&#x27;, &#x27;request_queue_size&#x27;: 5, &#x27;ssl_certificate&#x27;: &#x27;&#x27;, &#x27;cronjob&#x27;: False, &#x27;numthreads&#x27;: None, &#x27;quiet&#x27;: False, &#x27;import_models&#x27;: False, &#x27;timeout&#x27;: 10, &#x27;plain&#x27;: False, &#x27;nobanner&#x27;: False}&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">content_length</td><td style="vertical-align:top;">:</td><td><div>9</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">content_type</td><td style="vertical-align:top;">:</td><td><div>application/x-www-form-urlencoded; charset=UTF-8</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">db_sessions</td><td style="vertical-align:top;">:</td><td><div>set([])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">debugging</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">gluon_parent</td><td style="vertical-align:top;">:</td><td><div>/home/rbarghi/Documents/web2py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_accept</td><td style="vertical-align:top;">:</td><td><div>*/*</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_accept_encoding</td><td style="vertical-align:top;">:</td><td><div>gzip, deflate, br</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_accept_language</td><td style="vertical-align:top;">:</td><td><div>en-US,en;q=0.8</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_connection</td><td style="vertical-align:top;">:</td><td><div>keep-alive</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_content_length</td><td style="vertical-align:top;">:</td><td><div>9</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_content_type</td><td style="vertical-align:top;">:</td><td><div>application/x-www-form-urlencoded; charset=UTF-8</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_cookie</td><td style="vertical-align:top;">:</td><td><div>session_id_callofadventure=127.0.0.1-dc8dd33e-50ed-45f2-a837-24301503ade7</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_host</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1:8000</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_origin</td><td style="vertical-align:top;">:</td><td><div>http://127.0.0.1:8000</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_referer</td><td style="vertical-align:top;">:</td><td><div>http://127.0.0.1:8000/callofadventure/default/chat</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_user_agent</td><td style="vertical-align:top;">:</td><td><div>Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">http_x_requested_with</td><td style="vertical-align:top;">:</td><td><div>XMLHttpRequest</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_jython</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_pypy</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_source</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">local_hosts</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>192.168.1.180</div></td></tr><tr><td><div>::1</div></td></tr><tr><td><div>unknown9c4e36950f94.att.net</div></td></tr><tr><td><div>::ffff:127.0.0.1</div></td></tr><tr><td><div>127.0.0.1</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path_info</td><td style="vertical-align:top;">:</td><td><div>/callofadventure/default/message_updates.json</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">query_string</td><td style="vertical-align:top;">:</td><td><div>_signature=ab6818f6bb049dda479e2209ec749c4face43c24</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">remote_addr</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">remote_port</td><td style="vertical-align:top;">:</td><td><div>34024</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">request_method</td><td style="vertical-align:top;">:</td><td><div>POST</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">request_uri</td><td style="vertical-align:top;">:</td><td><div>/callofadventure/default/message_updates.json?_signature=ab6818f6bb049dda479e2209ec749c4face43c24</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">script_name</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_name</td><td style="vertical-align:top;">:</td><td><div>unknown9c4e36950f94.att.net</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_port</td><td style="vertical-align:top;">:</td><td><div>8000</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_protocol</td><td style="vertical-align:top;">:</td><td><div>HTTP/1.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">server_software</td><td style="vertical-align:top;">:</td><td><div>Rocket 1.2.6</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">web2py_path</td><td style="vertical-align:top;">:</td><td><div>/home/rbarghi/Documents/web2py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">web2py_version</td><td style="vertical-align:top;">:</td><td><div>2.14.6-stable+timestamp.2016.05.10.00.21.47</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.errors</td><td style="vertical-align:top;">:</td><td><div>&lt;open file &#x27;&lt;stderr&gt;&#x27;, mode &#x27;w&#x27; at 0x7f9edf5501e0&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.file_wrapper</td><td style="vertical-align:top;">:</td><td><div>&lt;class wsgiref.util.FileWrapper at 0x7f9ecdf966d0&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.input</td><td style="vertical-align:top;">:</td><td><div>&lt;socket._fileobject object at 0x7f9ec4795f50&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.multiprocess</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.multithread</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.run_once</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.url_scheme</td><td style="vertical-align:top;">:</td><td><div>http</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi.version</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>1</div></td></tr><tr><td><div>0</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_errors</td><td style="vertical-align:top;">:</td><td><div>&lt;open file &#x27;&lt;stderr&gt;&#x27;, mode &#x27;w&#x27; at 0x7f9edf5501e0&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_file_wrapper</td><td style="vertical-align:top;">:</td><td><div>&lt;class wsgiref.util.FileWrapper at 0x7f9ecdf966d0&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_input</td><td style="vertical-align:top;">:</td><td><div>&lt;socket._fileobject object at 0x7f9ec4795f50&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_multiprocess</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_multithread</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_run_once</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_url_scheme</td><td style="vertical-align:top;">:</td><td><div>http</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi_version</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>1</div></td></tr><tr><td><div>0</div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">extension</td><td style="vertical-align:top;">:</td><td><div>json</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">folder</td><td style="vertical-align:top;">:</td><td><div>/home/rbarghi/Documents/web2py/applications/callofadventure/</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">function</td><td style="vertical-align:top;">:</td><td><div>message_updates</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">global_settings</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">app_folders</td><td style="vertical-align:top;">:</td><td><div>set([&#x27;/home/rbarghi/Documents/web2py/applications/admin/&#x27;, &#x27;/home/rbarghi/Documents/web2py/applications/callofadventure/&#x27;, &#x27;/home/rbarghi/Documents/web2py/applications/w2pchat/&#x27;, &#x27;/home/rbarghi/Documents/web2py/applications/welcome/&#x27;])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">applications_parent</td><td style="vertical-align:top;">:</td><td><div>/home/rbarghi/Documents/web2py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cmd_args</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cmd_options</td><td style="vertical-align:top;">:</td><td><div>&lt;Values at 0x7f9ecdeec368: {&#x27;verbose&#x27;: False, &#x27;ip&#x27;: &#x27;127.0.0.1&#x27;, &#x27;debuglevel&#x27;: 30, &#x27;with_scheduler&#x27;: False, &#x27;shutdown_timeout&#x27;: 5, &#x27;taskbar&#x27;: False, &#x27;with_coverage&#x27;: False, &#x27;pid_filename&#x27;: &#x27;httpserver.pid&#x27;, &#x27;maxthreads&#x27;: None, &#x27;softcron&#x27;: False, &#x27;server_name&#x27;: &#x27;unknown9c4e36950f94.att.net&#x27;, &#x27;bpython&#x27;: False, &#x27;nogui&#x27;: False, &#x27;port&#x27;: 8000, &#x27;print_errors&#x27;: False, &#x27;extcron&#x27;: False, &#x27;runcron&#x27;: False, &#x27;run_system_tests&#x27;: False, &#x27;test&#x27;: None, &#x27;folder&#x27;: &#x27;/home/rbarghi/Documents/web2py&#x27;, &#x27;config&#x27;: &#x27;&#x27;, &#x27;minthreads&#x27;: None, &#x27;shell&#x27;: None, &#x27;run&#x27;: &#x27;&#x27;, &#x27;log_filename&#x27;: &#x27;httpserver.log&#x27;, &#x27;profiler_dir&#x27;: None, &#x27;args&#x27;: [&#x27;&#x27;], &#x27;socket_timeout&#x27;: 5, &#x27;ssl_ca_certificate&#x27;: None, &#x27;scheduler&#x27;: None, &#x27;interfaces&#x27;: None, &#x27;ssl_private_key&#x27;: &#x27;&#x27;, &#x27;gae&#x27;: None, &#x27;password&#x27;: &#x27;******&#x27;, &#x27;request_queue_size&#x27;: 5, &#x27;ssl_certificate&#x27;: &#x27;&#x27;, &#x27;cronjob&#x27;: False, &#x27;numthreads&#x27;: None, &#x27;quiet&#x27;: False, &#x27;import_models&#x27;: False, &#x27;timeout&#x27;: 10, &#x27;plain&#x27;: False, &#x27;nobanner&#x27;: False}&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">db_sessions</td><td style="vertical-align:top;">:</td><td><div>set([])</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">debugging</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">gluon_parent</td><td style="vertical-align:top;">:</td><td><div>/home/rbarghi/Documents/web2py</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_jython</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_pypy</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_source</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">local_hosts</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>192.168.1.180</div></td></tr><tr><td><div>::1</div></td></tr><tr><td><div>unknown9c4e36950f94.att.net</div></td></tr><tr><td><div>::ffff:127.0.0.1</div></td></tr><tr><td><div>127.0.0.1</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">web2py_version</td><td style="vertical-align:top;">:</td><td><div>2.14.6-stable+timestamp.2016.05.10.00.21.47</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_https</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_local</td><td style="vertical-align:top;">:</td><td><div>True</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_restful</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_scheduler</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">is_shell</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">now</td><td style="vertical-align:top;">:</td><td><div>datetime.datetime(2017, 3, 22, 11, 35, 5, 980619)</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">raw_args</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">raw_extension</td><td style="vertical-align:top;">:</td><td><div>json</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">url</td><td style="vertical-align:top;">:</td><td><div>/callofadventure/default/message_updates.json</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">utcnow</td><td style="vertical-align:top;">:</td><td><div>datetime.datetime(2017, 3, 22, 18, 35, 5, 980643)</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">wsgi</td><td style="vertical-align:top;">:</td><td><div>&lt;gluon.main.LazyWSGI object at 0x7f9ea45789d0&gt;</div></td></tr></table></div>'
tRp62
sS'frames'
p63
(lp64
(dp65
S'file'
p66
S'/home/rbarghi/Documents/web2py/gluon/restricted.py'
p67
sS'dump'
p68
(dp69
S'environment'
p70
S"{'A': <class 'gluon.html.A'>, 'ANY_OF': <class 'gluon.validators.ANY_OF'>, 'ASSIGNJS': <function ASSIGNJS>, 'Auth': <class 'gluon.tools.Auth'>, 'B': <class 'gluon.html.B'>, 'BEAUTIFY': <class 'gluon.html.BEAUTIFY'>, 'BODY': <class 'gluon.html.BODY'>, 'BR': <class 'gluon.html.BR'>, 'BUTTON': <class 'gluon.html.BUTTON'>, 'CAT': <class 'gluon.html.CAT'>, ...}"
p71
sS'ccode'
p72
S'<code object <module> at 0x7f9ea4a380b0, file "/.../callofadventure/controllers/default.py", line 7>'
p73
ssS'lnum'
p74
I227
sS'lines'
p75
(dp76
I224
S'            ccode = code'
p77
sI225
S'        else:'
p78
sI226
S'            ccode = compile2(code, layer)'
p79
sI227
S'        exec ccode in environment'
p80
sI228
S'    except HTTP:'
p81
sI229
S'        raise'
p82
sI230
S'    except RestrictedError:'
p83
sI231
S'        # do not encapsulate (obfuscate) the original RestrictedError'
p84
sI222
S'    try:'
p85
sI223
S'        if isinstance(code, types.CodeType):'
p86
ssS'call'
p87
S"(code='#-----------------------------#\\n#      default_c...response._vars=response._caller(message_updates)\\n', environment={'A': <class 'gluon.html.A'>, 'ANY_OF': <class 'gluon.validators.ANY_OF'>, 'ASSIGNJS': <function ASSIGNJS>, 'Auth': <class 'gluon.tools.Auth'>, 'B': <class 'gluon.html.B'>, 'BEAUTIFY': <class 'gluon.html.BEAUTIFY'>, 'BODY': <class 'gluon.html.BODY'>, 'BR': <class 'gluon.html.BR'>, 'BUTTON': <class 'gluon.html.BUTTON'>, 'CAT': <class 'gluon.html.CAT'>, ...}, layer='/home/rbarghi/Documents/web2py/applications/callofadventure/controllers/default.py')"
p88
sS'func'
p89
S'restricted'
p90
sa(dp91
g66
S'/home/rbarghi/Documents/web2py/applications/callofadventure/controllers/default.py'
p92
sg68
(dp93
sg74
I308
sg75
(dp94
I297
S'def message_updates():'
p95
sI298
S'    # need to unlock the session when using'
p96
sI299
S'    # session file, should not be need it when'
p97
sI300
S'    # using session in db, or in a cookie'
p98
sI301
S'    session._unlock(response)'
p99
sI302
S'    return chats.message_updates(db)'
p100
sI303
S''
sI304
S''
sI305
S'def user():'
p101
sI306
S'    return dict(form=auth())'
p102
ssg87
S'()'
p103
sg89
S'<module>'
p104
sa(dp105
g66
S'/home/rbarghi/Documents/web2py/gluon/globals.py'
p106
sg68
(dp107
S'self'
p108
S'undefined'
p109
sS'f'
S'<function message_updates>'
p110
ssg74
I417
sg75
(dp111
I416
S'        self._vars = None'
p112
sI417
S'        self._caller = lambda f: f()'
p113
sI418
S'        self._view_environment = None'
p114
sI419
S'        self._custom_commit = None'
p115
sI420
S'        self._custom_rollback = None'
p116
sI421
S"        self.generic_patterns = ['*']"
p117
sI412
S"        self.flash = ''            # used by the default view layout"
p118
sI413
S'        self.meta = Storage()      # used by web2py_ajax.html'
p119
sI414
S'        self.menu = []             # used by the default view layout'
p120
sI415
S'        self.files = []            # used by web2py_ajax.html'
p121
ssg87
S'(f=<function message_updates>)'
p122
sg89
S'<lambda>'
p123
sa(dp124
g66
S'/home/rbarghi/Documents/web2py/gluon/tools.py'
p125
sg68
(dp126
S'action'
p127
S'<function message_updates>'
p128
sS'a'
S'()'
p129
sS'b'
g21
ssg74
I4241
sg75
(dp130
I4236
S'                    flag = condition'
p131
sI4237
S'                if not flag:'
p132
sI4238
S'                    current.session.flash = self.messages.access_denied'
p133
sI4239
S'                    return call_or_redirect('
p134
sI4240
S'                        self.settings.on_failed_authorization)'
p135
sI4241
S'                return action(*a, **b)'
p136
sI4242
S'            f.__doc__ = action.__doc__'
p137
sI4243
S'            f.__name__ = action.__name__'
p138
sI4244
S'            f.__dict__.update(action.__dict__)'
p139
sI4245
S'            return f'
p140
ssg87
S'(*a=(), **b={})'
p141
sg89
S'f'
sa(dp142
g66
S'/home/rbarghi/Documents/web2py/applications/callofadventure/controllers/default.py'
p143
sg68
(dp144
S'chats.message_updates'
p145
S'<function message_updates>'
p146
sS'global db'
p147
S'<DAL uri="sqlite://storage.sqlite">'
p148
sS'global chats'
p149
S"<module 'applications.callofadventure.modules.ch... 'applications/callofadventure/modules/chats.py'>"
p150
ssg74
I302
sg75
(dp151
I297
S'def message_updates():'
p152
sI298
S'    # need to unlock the session when using'
p153
sI299
S'    # session file, should not be need it when'
p154
sI300
S'    # using session in db, or in a cookie'
p155
sI301
S'    session._unlock(response)'
p156
sI302
S'    return chats.message_updates(db)'
p157
sI303
S''
sI304
S''
sI305
S'def user():'
p158
sI306
S'    return dict(form=auth())'
p159
ssg87
S'()'
p160
sg89
S'message_updates'
p161
sa(dp162
g66
S'/home/rbarghi/Documents/web2py/applications/callofadventure/modules/chats.py'
p163
sg68
(dp164
S'global new_message_event'
p165
S'<gevent.event.Event object>'
p166
sS'new_message_event.wait'
p167
S'<bound method Event.wait of <gevent.event.Event object>>'
p168
ssg74
I65
sg75
(dp169
I64
S'    if not rows:'
p170
sI65
S'        new_message_event.wait()'
p171
sI66
S'        rows = db(q).select()'
p172
sI67
S''
sI68
S'    if rows:  # This should be always True'
p173
sI69
S'        current.session.cursor = rows.last().id'
p174
sI60
S'    cursor = int(current.session.cursor or 0)'
p175
sI61
S''
sI62
S'    q = db.chat.id > cursor'
p176
sI63
S'    rows = db(q).select()'
p177
ssg87
S'(db=<DAL uri="sqlite://storage.sqlite">)'
p178
sg89
g161
sa(dp179
g66
S'/usr/lib64/python2.7/site-packages/gevent/event.py'
p180
sg68
(dp181
S'self'
p182
S'<gevent.event.Event object>'
p183
sS'timeout'
p184
S'None'
p185
sS'self._wait'
p186
S'<bound method Event._wait of <gevent.event.Event object>>'
p187
ssg74
I219
sg75
(dp188
I214
S'            sets and then clears the flag without switching, while other greenlets'
p189
sI215
S'            are waiting. When the waiters wake up, this will return True; previously,'
p190
sI216
S'            they would still wake up, but the return value would be False. This is most'
p191
sI217
S'            noticeable when the *timeout* is present.'
p192
sI218
S'        """'
p193
sI219
S'        return self._wait(timeout)'
p194
sI220
S''
sI221
S'    def _reset_internal_locks(self): # pragma: no cover'
p195
sI222
S'        # for compatibility with threading.Event (only in case of patch_all(Event=True), by default Event is not patched)'
p196
sI223
S'        #  Exception AttributeError: AttributeError("\'Event\' object has no attribute \'_reset_internal_locks\'",)'
p197
ssg87
S'(self=<gevent.event.Event object>, timeout=None)'
p198
sg89
S'wait'
p199
sa(dp200
g66
S'/usr/lib64/python2.7/site-packages/gevent/event.py'
p201
sg68
(dp202
S'self._wait_core'
p203
S'<bound method Event._wait_core of <gevent.event.Event object>>'
p204
sS'self'
p205
S'<gevent.event.Event object>'
p206
sS'gotit'
p207
g109
sS'timeout'
p208
S'None'
p209
ssg74
I129
sg75
(dp210
I128
S''
sI129
S'        gotit = self._wait_core(timeout)'
p211
sI130
S'        return self._wait_return_value(True, gotit)'
p212
sI131
S''
sI132
S''
sI133
S'class Event(_AbstractLinkable):'
p213
sI124
S''
sI125
S'    def _wait(self, timeout=None):'
p214
sI126
S'        if self.ready():'
p215
sI127
S'            return self._wait_return_value(False, False)'
p216
ssg87
S'(self=<gevent.event.Event object>, timeout=None)'
p217
sg89
S'_wait'
p218
sa(dp219
g66
S'/usr/lib64/python2.7/site-packages/gevent/event.py'
p220
sg68
(dp221
S'self.hub'
p222
S'<Hub at 0x7f9ea47465f0 epoll pending=0 ref=0 fileno=12>'
p223
sS'self'
p224
S'<gevent.event.Event object>'
p225
sS'result'
p226
g109
sS'self.hub.switch'
p227
S'<bound method Hub.switch of <Hub at 0x7f9ea47465f0 epoll pending=0 ref=0 fileno=12>>'
p228
ssg74
I106
sg75
(dp229
I101
S'        self.rawlink(switch)'
p230
sI102
S'        try:'
p231
sI103
S'            timer = Timeout._start_new_or_dummy(timeout)'
p232
sI104
S'            try:'
p233
sI105
S'                try:'
p234
sI106
S'                    result = self.hub.switch()'
p235
sI107
S'                    if result is not self: # pragma: no cover'
p236
sI108
S"                        raise InvalidSwitchError('Invalid switch into Event.wait(): %r' % (result, ))"
p237
sI109
S'                    return True'
p238
sI110
S'                except catch as ex:'
p239
ssg87
S"(self=<gevent.event.Event object>, timeout=None, catch=<class 'gevent.timeout.Timeout'>)"
p240
sg89
S'_wait_core'
p241
sa(dp242
g66
S'/usr/lib64/python2.7/site-packages/gevent/hub.py'
p243
sg68
(dp244
S'self'
p245
S'<Hub at 0x7f9ea47465f0 epoll pending=0 ref=0 fileno=12>'
p246
sS'global RawGreenlet'
p247
S"<type 'greenlet.greenlet'>"
p248
sS'RawGreenlet.switch'
p249
S"<method 'switch' of 'greenlet.greenlet' objects>"
p250
ssg74
I630
sg75
(dp251
I625
S''
sI626
S'    def switch(self):'
p252
sI627
S"        switch_out = getattr(getcurrent(), 'switch_out', None)"
p253
sI628
S'        if switch_out is not None:'
p254
sI629
S'            switch_out()'
p255
sI630
S'        return RawGreenlet.switch(self)'
p256
sI631
S''
sI632
S'    def switch_out(self):'
p257
sI633
S"        raise BlockingSwitchOutError('Impossible to call blocking function in the event loop callback')"
p258
sI634
S''
ssg87
S'(self=<Hub at 0x7f9ea47465f0 epoll pending=0 ref=0 fileno=12>)'
p259
sg89
S'switch'
p260
sasS'pyver'
p261
S'Python 2.7.13: /usr/bin/python (prefix: /usr)'
p262
sS'session'
p263
g61
(S's\x90\x0c\x00\x00<div><table><tr><td style="font-weight:bold;vertical-align:top;">auth</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">expiration</td><td style="vertical-align:top;">:</td><td><div>3600</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">hmac_key</td><td style="vertical-align:top;">:</td><td><div>3f77c752-d4d1-43dc-a1ca-69fd682021bd</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">last_visit</td><td style="vertical-align:top;">:</td><td><div>datetime.datetime(2017, 3, 22, 11, 30, 33, 98013)</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">user</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">cost_to_hire</td><td style="vertical-align:top;">:</td><td><div>10L</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">curr_loadout</td><td style="vertical-align:top;">:</td><td><div>50L</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">email</td><td style="vertical-align:top;">:</td><td><div>Bill@ucsc.edu</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">first_name</td><td style="vertical-align:top;">:</td><td><div>Bill</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">gold</td><td style="vertical-align:top;">:</td><td><div>500L</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">id</td><td style="vertical-align:top;">:</td><td><div>2L</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">inventory</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">last_name</td><td style="vertical-align:top;">:</td><td><div>Evans</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">rare_ore</td><td style="vertical-align:top;">:</td><td><div>0L</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">registration_id</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">registration_key</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">reset_password_key</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">saved_loadouts</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">username</td><td style="vertical-align:top;">:</td><td><div>bill</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">user_groups</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">2</td><td style="vertical-align:top;">:</td><td><div>user_2</div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cursor</td><td style="vertical-align:top;">:</td><td><div>11L</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">flash</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr></table></div>'
tRp264
sS'etype'
p265
S"<class 'greenlet.error'>"
p266
sS'date'
p267
S'Wed Mar 22 11:35:06 2017'
p268
sS'response'
p269
g61
(S's\t=\x00\x00<div><table><tr><td style="font-weight:bold;vertical-align:top;">body</td><td style="vertical-align:top;">:</td><td><div>&lt;cStringIO.StringO object at 0x7f9ec457bd88&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">cookies</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">session_id_callofadventure</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1-dc8dd33e-50ed-45f2-a837-24301503ade7<table><tr><td style="font-weight:bold;vertical-align:top;">comment</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">domain</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">expires</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">httponly</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">max-age</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">path</td><td style="vertical-align:top;">:</td><td><div>/</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">secure</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">version</td><td style="vertical-align:top;">:</td><td><div></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">delimiters</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>{{</div></td></tr><tr><td><div>}}</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">files</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">flash</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">form_label_separator</td><td style="vertical-align:top;">:</td><td><div>: </div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">formstyle</td><td style="vertical-align:top;">:</td><td><div>table3cols</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">generic_patterns</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>*</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">headers</td><td style="vertical-align:top;">:</td><td><div><table><tr><td style="font-weight:bold;vertical-align:top;">X-Powered-By</td><td style="vertical-align:top;">:</td><td><div>web2py</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">logo</td><td style="vertical-align:top;">:</td><td><div><a class="navbar-brand" href="http://www.web2py.com/" id="web2py-logo"><b>web<span>2</span>py</b>&trade;&nbsp;</a></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">menu</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div><table><tr><td><div>Home</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/callofadventure/default/index.json</div></td></tr><tr><td><div><table></table></div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>My Sites</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/admin/default/site.json</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>This App</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>#</div></td></tr><tr><td><div><table><tr><td><div><table><tr><td><div>Design</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/admin/default/design.json/callofadventure</div></td></tr></table></div></td></tr><tr><td><div><li class="divider"></li></div></td></tr><tr><td><div><table><tr><td><div>Controller</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/admin/default/edit.json/callofadventure/controllers/default.py</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>View</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/admin/default/edit.json/callofadventure/views/default/message_updates.json</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>DB Model</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/admin/default/edit.json/callofadventure/models/db.py</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Menu Model</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/admin/default/edit.json/callofadventure/models/menu.py</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Config.ini</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/admin/default/edit.json/callofadventure/private/appconfig.ini</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Layout</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/admin/default/edit.json/callofadventure/views/layout.html</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Stylesheet</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/admin/default/edit.json/callofadventure/static/css/web2py-bootstrap3.css</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Database</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/callofadventure/appadmin/index.json</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Errors</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/admin/default/errors.json/callofadventure</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>About</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>/admin/default/about.json/callofadventure</div></td></tr></table></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>web2py.com</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>#</div></td></tr><tr><td><div><table><tr><td><div><table><tr><td><div>Download</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/examples/default/download</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Support</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/examples/default/support</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Demo</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://web2py.com/demo_admin</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Quick Examples</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://web2py.com/examples/default/examples</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>FAQ</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://web2py.com/AlterEgo</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Videos</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/examples/default/videos/</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Free Applications</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://web2py.com/appliances</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Plugins</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://web2py.com/plugins</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Recipes</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://web2pyslices.com/</div></td></tr></table></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Documentation</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>#</div></td></tr><tr><td><div><table><tr><td><div><table><tr><td><div>Online book</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/book</div></td></tr></table></div></td></tr><tr><td><div><li class="divider"></li></div></td></tr><tr><td><div><table><tr><td><div>Preface</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/book/default/chapter/00</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Introduction</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/book/default/chapter/01</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Python</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/book/default/chapter/02</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Overview</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/book/default/chapter/03</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>The Core</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/book/default/chapter/04</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>The Views</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/book/default/chapter/05</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Database</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/book/default/chapter/06</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Forms and Validators</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/book/default/chapter/07</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Email and SMS</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/book/default/chapter/08</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Access Control</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/book/default/chapter/09</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Services</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/book/default/chapter/10</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Ajax Recipes</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/book/default/chapter/11</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Components and Plugins</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/book/default/chapter/12</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Deployment Recipes</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/book/default/chapter/13</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Other Recipes</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/book/default/chapter/14</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Helping web2py</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/book/default/chapter/15</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Buy web2py\'s book</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://stores.lulu.com/web2py</div></td></tr></table></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Community</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>None</div></td></tr><tr><td><div><table><tr><td><div><table><tr><td><div>Groups</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://www.web2py.com/examples/default/usergroups</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Twitter</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://twitter.com/web2py</div></td></tr></table></div></td></tr><tr><td><div><table><tr><td><div>Live Chat</div></td></tr><tr><td><div>False</div></td></tr><tr><td><div>http://webchat.freenode.net/?channels=web2py</div></td></tr></table></div></td></tr></table></div></td></tr></table></div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">meta</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">models_to_run</td><td style="vertical-align:top;">:</td><td><div><table><tr><td><div>^\\w+\\.py$</div></td></tr><tr><td><div>^default/\\w+\\.py$</div></td></tr><tr><td><div>^default/message_updates/\\w+\\.py$</div></td></tr></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">postprocessing</td><td style="vertical-align:top;">:</td><td><div><table></table></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_client</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_cookie_compression_level</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_cookie_expires</td><td style="vertical-align:top;">:</td><td><div>None</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_data_name</td><td style="vertical-align:top;">:</td><td><div>session_data_callofadventure</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_file</td><td style="vertical-align:top;">:</td><td><div>&lt;open file &#x27;/home/rbarghi/Documents/web2py/applications/callofadventure/sessions/08d/08d/127.0.0.1-dc8dd33e-50ed-45f2-a837-24301503ade7&#x27;, mode &#x27;rb+&#x27; at 0x7f9ea47b4810&gt;</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_filename</td><td style="vertical-align:top;">:</td><td><div>/home/rbarghi/Documents/web2py/applications/callofadventure/sessions/127.0.0.1-dc8dd33e-50ed-45f2-a837-24301503ade7</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_hash</td><td style="vertical-align:top;">:</td><td><div>0015799898a5bed4509fc990e2c8b4e8</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_id</td><td style="vertical-align:top;">:</td><td><div>127.0.0.1-dc8dd33e-50ed-45f2-a837-24301503ade7</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_id_name</td><td style="vertical-align:top;">:</td><td><div>session_id_callofadventure</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_locked</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_masterapp</td><td style="vertical-align:top;">:</td><td><div>callofadventure</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_new</td><td style="vertical-align:top;">:</td><td><div>False</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">session_storage_type</td><td style="vertical-align:top;">:</td><td><div>file</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">status</td><td style="vertical-align:top;">:</td><td><div>200</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">subtitle</td><td style="vertical-align:top;">:</td><td><div></div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">title</td><td style="vertical-align:top;">:</td><td><div>Callofadventure</div></td></tr><tr><td style="font-weight:bold;vertical-align:top;">view</td><td style="vertical-align:top;">:</td><td><div>default/message_updates.json</div></td></tr></table></div>'
tRp270
sS'locals'
p271
(dp272
S'self'
p273
S'<Hub at 0x7f9ea47465f0 epoll pending=0 ref=0 fileno=12>'
p274
sS'switch_out'
p275
S'None'
p276
sssS'traceback'
p277
S'Traceback (most recent call last):\n  File "/home/rbarghi/Documents/web2py/gluon/restricted.py", line 227, in restricted\n    exec ccode in environment\n  File "/home/rbarghi/Documents/web2py/applications/callofadventure/controllers/default.py", line 308, in <module>\n  File "/home/rbarghi/Documents/web2py/gluon/globals.py", line 417, in <lambda>\n    self._caller = lambda f: f()\n  File "/home/rbarghi/Documents/web2py/gluon/tools.py", line 4241, in f\n    return action(*a, **b)\n  File "/home/rbarghi/Documents/web2py/applications/callofadventure/controllers/default.py", line 302, in message_updates\n    return chats.message_updates(db)\n  File "applications/callofadventure/modules/chats.py", line 65, in message_updates\n    new_message_event.wait()\n  File "/usr/lib64/python2.7/site-packages/gevent/event.py", line 219, in wait\n    return self._wait(timeout)\n  File "/usr/lib64/python2.7/site-packages/gevent/event.py", line 129, in _wait\n    gotit = self._wait_core(timeout)\n  File "/usr/lib64/python2.7/site-packages/gevent/event.py", line 106, in _wait_core\n    result = self.hub.switch()\n  File "/usr/lib64/python2.7/site-packages/gevent/hub.py", line 630, in switch\n    return RawGreenlet.switch(self)\nerror: cannot switch to a different thread\n'
p278
s.